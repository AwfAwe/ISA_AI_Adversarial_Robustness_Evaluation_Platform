{"ast":null,"code":"var _jsxFileName = \"E:\\\\\\u6BD4\\u8D5B\\\\\\u4FE1\\u606F\\u5B89\\u5168\\u7ADE\\u8D5B\\\\m1_new\\\\isa_project\\\\src\\\\views\\\\Test\\\\Process\\\\Form\\\\Form.js\",\n  _s = $RefreshSig$();\nimport \"./FormStyle.css\";\nimport * as echarts from 'echarts';\nimport { useRef, useEffect, useState } from \"react\";\nimport Papa from 'papaparse';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Form() {\n  _s();\n  const chartRef = useRef(null);\n  const mychart = [];\n  const option = {\n    xAxis: {\n      // type: 'category',\n      name: '查询次数',\n      data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n      // data: {x_data_show}\n    },\n\n    yAxis: {\n      // type: 'value',\n      name: 'distance'\n    },\n    series: [{\n      data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n      // data: {y_data_show},\n      type: 'line',\n      smooth: true,\n      showAllSymbol: true\n    }],\n    tooltip: {\n      trigger: 'item'\n    }\n  };\n  useEffect(() => {\n    const mychart = echarts.init(chartRef.current);\n    mychart.setOption(option);\n  }, []);\n  const x_data = [];\n  const y_data = [];\n  const x_data_show = [];\n  const y_data_show = [];\n  const lines = [];\n  function handleFileChange(event) {\n    // 获取用户选择的文件\n    let file = event.target.files[0];\n    // 创建一个FileReader对象\n    let reader = new FileReader();\n    // 设置读取文件的编码格式\n    reader.readAsText(file, 'utf8');\n    reader.onload = () => {\n      // 获取文件内容，是一个字符串\n      let data = reader.result;\n      // 按换行符分割字符串，返回一个数组\n      let lines = data.split('\\n');\n      console.log(lines);\n      // 遍历每一行\n      for (let line of lines) {\n        // 按逗号分割每一行，返回一个数组\n        let values = line.split(',');\n        // 去除values中第一个和第二个元素，返回一个新数组\n        let filteredValues = values.slice(2);\n        //   console.log(filteredValues);\n        // 把新数组添加到lines数组中\n        if (line != 1) {\n          x_data.push(filteredValues.slice(0, 1));\n          y_data.push(filteredValues.slice(1, 2));\n        }\n        lines.push(filteredValues);\n      }\n      var json_x = JSON.stringify(this.x_data); // 将object转换为JSON字符串\n      var array_x = JSON.parse(json_x); // 将JSON字符串解析为数组\n      var result_x = array_x.map(function (sub) {\n        return Number(sub[0]); // 将子数组中的第一个元素转换为数字\n      });\n\n      var result_x = result_x.filter(function (num) {\n        return !isNaN(num); // 只保留有效的数字\n      });\n\n      x_data_show = result_x;\n      var json_y = JSON.stringify(this.y_data); // 将object转换为JSON字符串\n      var array_y = JSON.parse(json_y); // 将JSON字符串解析为数组\n      var result_y = array_y.map(function (sub) {\n        return Number(sub[0]); // 将子数组中的第一个元素转换为数字\n      });\n\n      var result_y = result_y.filter(function (num) {\n        return !isNaN(num); // 只保留有效的数字\n      });\n\n      y_data_show = result_y;\n      option.xAxis.data = x_data_show;\n      option.series[0].data = y_data_show;\n      mychart.setOption(this.option);\n    };\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"form\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        ref: chartRef,\n        style: {\n          width: '100%',\n          height: 300\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \".csv\",\n        onChange: handleFileChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n_s(Form, \"X+1SfQQ6xefXNU27aQW843M7cTw=\");\n_c = Form;\nvar _c;\n$RefreshReg$(_c, \"Form\");","map":{"version":3,"names":["echarts","useRef","useEffect","useState","Papa","jsxDEV","_jsxDEV","Fragment","_Fragment","Form","_s","chartRef","mychart","option","xAxis","name","data","yAxis","series","type","smooth","showAllSymbol","tooltip","trigger","init","current","setOption","x_data","y_data","x_data_show","y_data_show","lines","handleFileChange","event","file","target","files","reader","FileReader","readAsText","onload","result","split","console","log","line","values","filteredValues","slice","push","json_x","JSON","stringify","array_x","parse","result_x","map","sub","Number","filter","num","isNaN","json_y","array_y","result_y","children","id","ref","style","width","height","fileName","_jsxFileName","lineNumber","columnNumber","accept","onChange","_c","$RefreshReg$"],"sources":["E:/比赛/信息安全竞赛/m1_new/isa_project/src/views/Test/Process/Form/Form.js"],"sourcesContent":["import \"./FormStyle.css\"\r\nimport * as echarts from 'echarts';\r\nimport { useRef ,useEffect, useState} from \"react\";\r\nimport Papa from 'papaparse';\r\nexport default function Form(){\r\n    const chartRef = useRef(null);\r\n    const mychart = [];\r\n    const option={\r\n        xAxis: {\r\n            // type: 'category',\r\n            name:'查询次数',\r\n            data: [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\r\n            // data: {x_data_show}\r\n        },\r\n        yAxis: {\r\n            // type: 'value',\r\n            name:'distance',\r\n        },\r\n        series: [\r\n            {\r\n                data: [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\r\n            // data: {y_data_show},\r\n                type: 'line',\r\n                smooth: true,\r\n                showAllSymbol: true,\r\n            }\r\n        ],\r\n        tooltip:{trigger:'item'},\r\n    };\r\n    useEffect(() => {\r\n        const mychart = echarts.init(chartRef.current);\r\n        mychart.setOption(option);\r\n      }, []);\r\n      const x_data = [];\r\n      const y_data = [];\r\n      const x_data_show = [];\r\n      const y_data_show = [];\r\n      const lines = [];\r\n    function handleFileChange(event) {\r\n        // 获取用户选择的文件\r\n        let file = event.target.files[0];\r\n        // 创建一个FileReader对象\r\n        let reader = new FileReader();\r\n        // 设置读取文件的编码格式\r\n        reader.readAsText(file, 'utf8');\r\n        reader.onload = () => {\r\n            // 获取文件内容，是一个字符串\r\n            let data = reader.result;\r\n            // 按换行符分割字符串，返回一个数组\r\n            let lines = data.split('\\n');\r\n            console.log(lines)\r\n            // 遍历每一行\r\n            for (let line of lines) {\r\n            // 按逗号分割每一行，返回一个数组\r\n            let values = line.split(',');\r\n            // 去除values中第一个和第二个元素，返回一个新数组\r\n            let filteredValues = values.slice(2);\r\n            //   console.log(filteredValues);\r\n            // 把新数组添加到lines数组中\r\n            if(line !=1){\r\n                x_data.push(filteredValues.slice(0,1));\r\n                y_data.push(filteredValues.slice(1,2));\r\n                }\r\n                lines.push(filteredValues);\r\n            }\r\n            var json_x = JSON.stringify(this.x_data); // 将object转换为JSON字符串\r\n            var array_x = JSON.parse(json_x); // 将JSON字符串解析为数组\r\n            var result_x = array_x.map(function(sub) {\r\n                return Number(sub[0]); // 将子数组中的第一个元素转换为数字\r\n            });\r\n            var result_x = result_x.filter(function(num) {\r\n                return !isNaN(num); // 只保留有效的数字\r\n            });\r\n            x_data_show = result_x;\r\n            var json_y = JSON.stringify(this.y_data); // 将object转换为JSON字符串\r\n            var array_y = JSON.parse(json_y); // 将JSON字符串解析为数组\r\n            var result_y = array_y.map(function(sub) {\r\n                return Number(sub[0]); // 将子数组中的第一个元素转换为数字\r\n            });\r\n            var result_y = result_y.filter(function(num) {\r\n                return !isNaN(num); // 只保留有效的数字\r\n            });\r\n            y_data_show = result_y;\r\n            option.xAxis.data = x_data_show;\r\n            option.series[0].data = y_data_show;\r\n            mychart.setOption(this.option);\r\n        } \r\n    }\r\n    return (\r\n        <>\r\n            <div id=\"form\">\r\n                 <div ref={chartRef} style={{ width: '100%', height: 300 }}></div>\r\n                 <input type=\"file\" accept=\".csv\" onChange={handleFileChange} />\r\n            </div>\r\n        </>\r\n    );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}